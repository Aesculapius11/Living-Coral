@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html, body { height: 100%; }
}

@layer components {
  .card {
    @apply p-5 rounded-2xl border border-black/5 dark:border-white/10 shadow-sm;
  }

  /* Typography enhancements */
  .prose {
    @apply leading-relaxed;
  }

  .prose h1, .prose h2, .prose h3 {
    @apply tracking-tight font-semibold text-neutral-900 dark:text-neutral-100;
  }
    /* 链接样式 */
  .prose a {
    @apply text-neutral-900 dark:text-neutral-100 underline decoration-livingCoral/30 dark:decoration-livingCoral/40 underline-offset-4 hover:decoration-livingCoral dark:hover:decoration-livingCoral;
  }

  .prose blockquote {
    @apply border-l-4 border-livingCoral/40 bg-black/[0.03] dark:bg-white/[0.04] rounded-r-xl px-4 py-2 text-neutral-700 dark:text-neutral-200;
  }

  /* Code block styling */
  .prose pre {
    @apply relative rounded-xl border border-black/5 dark:border-white/10 shadow-sm overflow-x-auto bg-neutral-50 dark:bg-neutral-900;
  }

  .prose pre code {
    @apply text-neutral-800 dark:text-neutral-100 break-words whitespace-pre-wrap;
  }

  /* 移动端代码块优化 */
  @media (max-width: 768px) {
    .prose pre {
      @apply text-sm leading-relaxed;
    }
    
    .prose pre code {
      @apply break-words whitespace-pre-wrap;
    }
    
    /* 强制代码块在小屏幕上换行 */
    .prose pre {
      @apply whitespace-pre-wrap break-words;
    }
  }

  /* 超小屏幕下的代码块处理 */
  @media (max-width: 480px) {
    .prose pre {
      @apply text-xs px-3 py-2;
    }
    
    /* 确保长行代码能够换行显示 */
    .prose pre code {
      @apply break-all;
    }
  }
    /* 行内代码样式 */
  .prose code:not(pre code) {
    @apply rounded px-1.5 py-0.5 bg-livingCoral/10 dark:bg-livingCoral/20 text-livingCoral;
  }

  /* Copy button for code blocks */
  .copy-btn {
    @apply absolute top-2 right-2 z-10 inline-flex items-center gap-1 rounded-md px-2 py-1 text-xs font-medium bg-white/80 dark:bg-neutral-800/80 backdrop-blur border border-black/10 dark:border-white/10 text-neutral-700 dark:text-neutral-200 opacity-0 transition;
  }

  .prose pre:hover .copy-btn {
    @apply opacity-100;
  }

  .copy-btn.copied {
    @apply bg-livingCoral text-white dark:text-white border-transparent;
  }

  /* 自定义 Markdown 表格样式 */
  .prose table {
    @apply w-full text-sm border-separate border-spacing-0 rounded-xl overflow-hidden;
  }
  
  .prose thead th {
    @apply bg-livingCoral/10 font-semibold text-neutral-700 dark:text-neutral-200;
  }
  
  .prose th,
  .prose td {
    @apply p-3 align-middle border-b border-black/5 dark:border-white/10 border-r border-black/5 dark:border-white/10;
  }
  
  .prose th:last-child,
  .prose td:last-child {
    @apply border-r-0;
  }
  
  .prose tbody tr:hover {
    @apply bg-black/5 dark:bg-white/5;
  }
  
  .prose tbody tr:last-child td {
    @apply border-b-0;
  }
  
  .prose thead th:first-child {
    @apply rounded-tl-xl;
  }
  
  .prose thead th:last-child {
    @apply rounded-tr-xl;
  }
  
  .prose tfoot td:first-child {
    @apply rounded-bl-xl;
  }
  
  .prose tfoot td:last-child {
    @apply rounded-br-xl;
  }

  /* 移动端横向滚动 */
  @media (max-width: 768px) {
    .prose table {
      display: block;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      white-space: nowrap;
    }
  }
  /* APlayer 主题适配 */
/* APlayer 日间模式调整 */
/* 背景色 */
.aplayer {
  background: rgba(255, 255, 255, 0.6) !important;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.07), 0 1px 5px 0 rgba(0, 0, 0, 0.1);
  position: relative;
}

.aplayer.aplayer-fixed .aplayer-lrc:after,
.aplayer.aplayer-fixed .aplayer-lrc:before {
  display: none;
}

.aplayer.aplayer.aplayer-fixed .aplayer-body {
  background: rgba(255, 255, 255, 0.6) !important;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.07), 0 1px 5px 0 rgba(0, 0, 0, 0.1);
  position: fixed;
}

/* 滚动条 */
.aplayer .aplayer-list ol::-webkit-scrollbar {
  width: 5px;
}

.aplayer .aplayer-list ol::-webkit-scrollbar-thumb {
  border-radius: 3px;
  background-color: #fac2bd !important;
}

.aplayer .aplayer-list ol::-webkit-scrollbar-thumb:hover {
  background-color: #fac2bd !important;
}



/* 选中与播放中歌曲激活颜色 */
.aplayer .aplayer-list ol li:hover {
  background: #fac2bd !important;
}

.aplayer .aplayer-list ol li.aplayer-list-light {
  background: #fac2bd !important;
}



/* APlayer 黑暗模式 */
.dark .aplayer {
  background: rgba(22, 22, 22, 0.6) !important;
  color: rgb(255, 255, 255);
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.07), 0 1px 5px 0 rgba(0, 0, 0, 0.1);
  
}

.dark .aplayer.aplayer-fixed .aplayer-body {
  background: rgba(22, 22, 22, 0.6) !important;
  color: rgb(255, 255, 255);
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.07), 0 1px 5px 0 rgba(0, 0, 0, 0.1);
}

.dark
  .aplayer
  .aplayer-info
  .aplayer-controller
  .aplayer-time
  .aplayer-icon
  path {
  fill: #d4d4d4;
}

.dark .aplayer .aplayer-list ol li:hover {
  background: #FC766A !important;

}

.dark .aplayer .aplayer-list ol li.aplayer-list-light {
  background: #FC766A !important;
}

.dark .aplayer .aplayer-info .aplayer-controller .aplayer-time {
  color: #f1f1f1;

}

.dark .aplayer .aplayer-list ol li .aplayer-list-index {
  color: #f1f1f1;
}

.dark .aplayer .aplayer-list ol li .aplayer-list-author {
  color: #f1f1f1;
}
.dark .aplayer .aplayer-info .aplayer-music .aplayer-title {
  color: #f1f1f1;
}
.dark .aplayer .aplayer-info .aplayer-music .aplayer-author
 {
    color: #f1f1f1;
}
.dark .aplayer .aplayer-list ol li .aplayer-list-title 
 {
    color: #f1f1f1;
}

.dark .aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon:hover path{
  fill:#FC766A;
}

.dark .aplayer .aplayer-list ol::-webkit-scrollbar-thumb {
  border-radius: 3px;
  background-color: #FC766A !important;
}

.dark.aplayer .aplayer-list ol::-webkit-scrollbar-thumb:hover {
  background-color: #FC766A !important;
}

  .dark .aplayer .aplayer-lrc p { color: #9ca3af; }
  .dark .aplayer .aplayer-lrc p.aplayer-lrc-current { color: #FC766A; }
}

/* 大纲栏样式 */
.table-of-contents {
  scrollbar-width: thin;
  scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
}

.table-of-contents::-webkit-scrollbar {
  width: 4px;
}

.table-of-contents::-webkit-scrollbar-track {
  background: transparent;
}

.table-of-contents::-webkit-scrollbar-thumb {
  background-color: rgba(156, 163, 175, 0.3);
  border-radius: 2px;
}

.table-of-contents::-webkit-scrollbar-thumb:hover {
  background-color: rgba(156, 163, 175, 0.5);
}

.dark .table-of-contents::-webkit-scrollbar-thumb {
  background-color: rgba(156, 163, 175, 0.3);
}

.dark .table-of-contents::-webkit-scrollbar-thumb:hover {
  background-color: rgba(156, 163, 175, 0.5);
}

/* 大纲链接悬停效果 */
.table-of-contents a {
  position: relative;
  transition: all 0.2s ease;
}

.table-of-contents a:hover {
  transform: translateX(2px);
}

/* 移动端大纲弹窗动画 */
@keyframes slideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.mobile-toc-enter {
  animation: slideUp 0.3s ease-out;
}

/* 按钮上升 */
@keyframes float {
  0% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-20px);
  }
  100% {
    transform: translateY(0px);
  }
}

/* Apply the floating animation */
#scrollToTopBtn.float img {
  animation: float 3s ease-in-out infinite;
}

/* Falling Animation */
@keyframes fall {
  from {
    transform: translateY(-100%); /* 初始位置在上方 */
    opacity: 0;
  }
  to {
    transform: translateY(0); /* 结束位置，按钮的原始位置 */
    opacity: 1;
  }
}

/* 上升动画 */
@keyframes rise {
  from {
    transform: translateY(0); /* 初始位置，按钮的原始位置 */
    opacity: 1;
  }
  to {
    transform: translateY(-100%); /* 结束位置，在上方隐藏 */
    opacity: 0;
  }
}

/* 应用下落动画*/
#scrollToTopBtn.fall-down img {
  animation: fall 0.5s ease-out forwards;
}

/* 应用上升动画 */
#scrollToTopBtn.rise-up img {
  animation: rise 0.5s ease-out forwards;
}

#scrollToTopBtn {
  width: 70px;
  height: auto;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
  position: fixed;
  top: -50px; /* 初始位置，紧贴顶部 */
  right: 8px;
  z-index: 50;
  box-shadow: none;
  transition: opacity 0.3s ease-in-out, top 0.5s ease-out; /* 平滑过渡 opacity 和 top */
  opacity: 0; /* 初始状态完全透明 */
}

#scrollToTopBtn img {
  display: block;
  width: 100%;
  height: auto;
  object-fit: contain;
}

#scrollToTopBtn:focus {
  outline: none;
}

#scrollToTopBtn.visible {
  opacity: 1; /* 可见状态,显示，动画完成后设置为可见 */
  top: -70px;/*下落动画完成后，距离顶部-70*/
}

#scrollToTopBtn.hidden {
  visibility: hidden;
}

/* 在移动设备上隐藏按钮 */
@media (max-width: 1024px) {
  #scrollToTopBtn {
    display: none; /* 彻底隐藏元素 */
  }
}

/* 侧边栏样式优化 */
.sidebar-card {
  @apply transition-all duration-300 ease-in-out;
}

.sidebar-card:hover {
  @apply transform -translate-y-1 shadow-lg;
}

/* 侧边栏链接悬停效果 */
.sidebar-link {
  @apply transition-all duration-200 ease-in-out;
}

.sidebar-link:hover {
  @apply transform translate-x-1;
}

/* 响应式侧边栏 */
@media (max-width: 1024px) {
  .sidebar-card {
    display: none;
  }
  .sidebar-responsive {
    @apply order-first w-full;
  }
}

/* 侧边栏渐变动画 */
@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.gradient-animate {
  background-size: 200% 200%;
  animation: gradientShift 3s ease infinite;
}

/* 友联侧边栏滚动条样式 */
.friends-links-scroll::-webkit-scrollbar {
  width: 4px;
}

.friends-links-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.friends-links-scroll::-webkit-scrollbar-thumb {
  background-color: rgba(252, 118, 106, 0.3);
  border-radius: 2px;
}

.friends-links-scroll::-webkit-scrollbar-thumb:hover {
  background-color: rgba(252, 118, 106, 0.5);
}

/* 深色模式下的滚动条 */
.dark .friends-links-scroll::-webkit-scrollbar-thumb {
  background-color: rgba(252, 118, 106, 0.4);
}

.dark .friends-links-scroll::-webkit-scrollbar-thumb:hover {
  background-color: rgba(252, 118, 106, 0.6);
}
